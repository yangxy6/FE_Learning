## 异或

异或的结果就是两个数差异所在，点位中 1 代表差异位

1. 两数相加
   > 来源：Leetcode 第 190 题  
   > 思路：竖式加法，a&b 获取进位，a^b 无进位加法

```js
var getSum = function(a, b) {
  while (b !== 0) {
    // 直到b=0，没有需要进位的了
    let temp = (a & b) << 1; //a&b 获取进位，同时左移1位
    a = a ^ b; // a^b无进位加法
    b = temp;
  }
  return a;
};
```

2. 交换两个变量
   > 来源：
   > 思路：异或操作

```js
// 简单来说 a^b类似temp保留了两个数互异的点位，并赋值给a，再次a^b得到就是a原来的值
function swap(a, b) {
  a ^= b; //a中存放两数互异的点位
  b ^= a; // 取反 b 中不同于 a 的点位，也就是实现了 b = a
  a ^= b; // 取反 a 中不同于 b 的点位，也就是实现了 a = b
}
```

3. a 转换 b
   > 来源：
   > 思路：异或，两个数做异或的结果就是两个数差异所在，然后只需计算这个结果中有多少个 1 即可。

```js
function convertA2B(a, b) {
  let n = a ^ b; // n中存放ab两数互异点位，计算1的次数代表需要转化的位数
  let count = 0;
  while (n !== 0) {
    n = n & (n - 1); // n与n-1末位肯定是不同值，n&n-1可以消除一次1
    count++;
  }
  return count;
}
```

4. 只出现一次的数字
   > 来源：Leetcode 第 136 题  
   > 思路：
   >
   > - 异或运算和乘法一样，位置和运算顺序不影响最后结果：a^b^c = b^c^a
   > - 两个相同的数做异或运算结果为零：a^a = 0
   > - 任何数和零做异或结果还是这个数本身：a^0 = a

```js
var singleNumber = function(nums) {
  let ans;
  for (let i = 0; i < nums.length; i++) {
    ans ^= nums[i]; // 异或操作与顺序没有关系a^b^c与c^b^a一样，其中a^a=0两个相同值没有互异的点位
  }
  return ans;
};
```
